<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ktds.crmai.service.impl.DashboardChartMapper">
	<resultMap type="com.ktds.crmai.model.AIStatistics"
		id="aiStatisticMap">
		<result column="CAM_ID" property="camId" />
		<result column="CAM_NAME" property="camName" />
		<result column="CAM_STATUS" property="camStatus" />
		<result column="ADM_ID" property="admId" />
		<result column="ADM_NAME" property="admName" />
		<result column="CAM_TYPE" property="camType" />
		<result column="CAM_CDATE" property="camCdate" />
		<result column="ADM_TYPE" property="admType" />
		<result column="TRAIN_METHOD" property="trainMethod" />
		<result column="ORIGINAL_ACC" property="originalAcc" />
		<result column="SO_ACC" property="soAcc" />
		<result column="REAL_ACC" property="realAcc" />
		<result column="MODEL_FLAG" property="modelFlag" />
		<result column="TEST_CNT" property="testCnt" />
	</resultMap>
	<resultMap type="com.ktds.crmai.model.DashboardChart"
		id="dashboardChart">
		<result column="TOTAL_COUNT" property="totalCount" />
		<result column="TOTAL_ORIGINAL" property="totalOriginal" />
		<result column="TOTAL_SO" property="totalSo" />
		<result column="TOTAL_REAL" property="totalReal" />
	</resultMap>
	

	<!-- 좌측차트 -->

	<select id="selectMyData" resultMap="aiStatisticMap">
		SELECT CAM_ID,
		CAM_NAME,
		CAM_STATUS,
		ADM_ID,
		ADM_NAME,
		CAM_TYPE,
		CAM_CDATE,
		ADM_TYPE,
		TRAIN_METHOD,
		ORIGINAL_ACC,
		SO_ACC,
		REAL_ACC,
		MODEL_FLAG,
		TEST_CNT
		FROM AI_STATISTICS
		WHERE MODEL_FLAG = 'Y' AND ADM_ID = #{ADM_ID}
	</select>

	<select id="selectMyDataCount" resultType="int">
		SELECT count(*)
		from
		ai_statistics WHERE MODEL_FLAG = 'Y' AND ADM_ID = #{ADM_ID}
	</select>

	<select id="selectMyDataStat" resultMap="dashboardChart">
		SELECT
		COUNT(*) AS TOTAL_COUNT,
		ROUND(AVG(ORIGINAL_ACC), 2) AS TOTAL_ORIGINAL, ROUND(AVG(SO_ACC),2) AS TOTAL_SO, ROUND(AVG(REAL_ACC),2) AS TOTAL_REAL
		FROM AI_STATISTICS
		WHERE MODEL_FLAG = 'Y' AND ADM_ID = #{ADM_ID}
	</select>

	<!-- 우측차트 -->

	<select id="selectTotalData" resultMap="aiStatisticMap">
		SELECT CAM_ID,
		CAM_NAME,
		CAM_STATUS,
		ADM_ID,
		ADM_NAME,
		CAM_TYPE,
		CAM_CDATE,
		ADM_TYPE,
		TRAIN_METHOD,
		ORIGINAL_ACC,
		SO_ACC,
		REAL_ACC,
		MODEL_FLAG,
		TEST_CNT
		FROM AI_STATISTICS
		WHERE MODEL_FLAG = 'Y'
	</select>

	<select id="selectTotalDataCount" resultType="int">
		SELECT count(*)
		from
		ai_statistics WHERE MODEL_FLAG = 'Y'
	</select>
	<select id="selectTotalDataStat" resultMap="dashboardChart">
		SELECT
		COUNT(*) AS TOTAL_COUNT,
		ROUND(AVG(ORIGINAL_ACC), 2) AS TOTAL_ORIGINAL, ROUND(AVG(SO_ACC),2) AS TOTAL_SO, ROUND(AVG(REAL_ACC),2) AS TOTAL_REAL
		FROM AI_STATISTICS
		WHERE MODEL_FLAG = 'Y'
	</select>






</mapper>